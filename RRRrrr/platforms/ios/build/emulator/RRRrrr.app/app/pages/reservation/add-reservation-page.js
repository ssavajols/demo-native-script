"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var view = require("ui/core/view");
var routing_1 = require("~/shared/routing");
var model;
var page;
function onNavigatingTo(args) {
    page = args.object;
    model = args.context;
    page.bindingContext = args.context;
}
exports.onNavigatingTo = onNavigatingTo;
function onSave(args) {
    var label = view.getViewById(page, 'label');
    var description = view.getViewById(page, 'description');
    var dateDebut = view.getViewById(page, 'dateDebut');
    var dateFin = view.getViewById(page, 'dateFin');
    var dateStart = new Date();
    var dateEnd = new Date();
    dateStart.setHours(dateDebut.hour);
    dateStart.setMinutes(dateDebut.minute);
    dateEnd.setHours(dateFin.hour);
    dateEnd.setMinutes(dateFin.minute);
    model.saveReservation({
        dateEnd: dateStart,
        dateStart: dateEnd,
        description: description.text,
        id: null,
        label: label.text,
        roomId: model.roomId
    }).then(function () { return routing_1.goBack(); });
}
exports.onSave = onSave;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkLXJlc2VydmF0aW9uLXBhZ2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhZGQtcmVzZXJ2YXRpb24tcGFnZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUtBLG1DQUFvQztBQUNwQyw0Q0FBeUM7QUFFekMsSUFBSSxLQUFLLENBQUE7QUFDVCxJQUFJLElBQUksQ0FBQTtBQUVSLHdCQUFnQyxJQUFtQjtJQUNqRCxJQUFJLEdBQUcsSUFBSSxDQUFDLE1BQWMsQ0FBQTtJQUUxQixLQUFLLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQTtJQUVwQixJQUFJLENBQUMsY0FBYyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUE7QUFDcEMsQ0FBQztBQU5ELHdDQU1DO0FBRUQsZ0JBQXdCLElBQXNCO0lBQzVDLElBQU0sS0FBSyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLE9BQU8sQ0FBYyxDQUFBO0lBQzFELElBQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLGFBQWEsQ0FBYSxDQUFBO0lBQ3JFLElBQU0sU0FBUyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLFdBQVcsQ0FBZSxDQUFBO0lBQ25FLElBQU0sT0FBTyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxFQUFFLFNBQVMsQ0FBZSxDQUFBO0lBRS9ELElBQU0sU0FBUyxHQUFHLElBQUksSUFBSSxFQUFFLENBQUE7SUFDNUIsSUFBTSxPQUFPLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQTtJQUUxQixTQUFTLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUNsQyxTQUFTLENBQUMsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUV0QyxPQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQTtJQUM5QixPQUFPLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQTtJQUVsQyxLQUFLLENBQUMsZUFBZSxDQUFDO1FBQ3BCLE9BQU8sRUFBRSxTQUFTO1FBQ2xCLFNBQVMsRUFBRSxPQUFPO1FBQ2xCLFdBQVcsRUFBRSxXQUFXLENBQUMsSUFBSTtRQUM3QixFQUFFLEVBQUUsSUFBSTtRQUNSLEtBQUssRUFBRSxLQUFLLENBQUMsSUFBSTtRQUNqQixNQUFNLEVBQUUsS0FBSyxDQUFDLE1BQU07S0FDckIsQ0FBQyxDQUFDLElBQUksQ0FBQyxjQUFNLE9BQUEsZ0JBQU0sRUFBRSxFQUFSLENBQVEsQ0FBQyxDQUFBO0FBRXpCLENBQUM7QUF4QkQsd0JBd0JDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR2VzdHVyZUV2ZW50RGF0YSB9IGZyb20gJ3Rucy1jb3JlLW1vZHVsZXMvdWkvZ2VzdHVyZXMvZ2VzdHVyZXMnXG5pbXBvcnQgeyBOYXZpZ2F0ZWREYXRhLCBQYWdlIH0gZnJvbSAndG5zLWNvcmUtbW9kdWxlcy91aS9wYWdlL3BhZ2UnXG5pbXBvcnQgeyBUZXh0RmllbGQgfSBmcm9tICd0bnMtY29yZS1tb2R1bGVzL3VpL3RleHQtZmllbGQnXG5pbXBvcnQgeyBUZXh0VmlldyB9IGZyb20gJ3Rucy1jb3JlLW1vZHVsZXMvdWkvdGV4dC12aWV3J1xuaW1wb3J0IHsgVGltZVBpY2tlciB9IGZyb20gJ3Rucy1jb3JlLW1vZHVsZXMvdWkvdGltZS1waWNrZXInXG5pbXBvcnQgKiBhcyB2aWV3IGZyb20gJ3VpL2NvcmUvdmlldydcbmltcG9ydCB7IGdvQmFjayB9IGZyb20gJ34vc2hhcmVkL3JvdXRpbmcnXG5cbmxldCBtb2RlbFxubGV0IHBhZ2VcblxuZXhwb3J0IGZ1bmN0aW9uIG9uTmF2aWdhdGluZ1RvIChhcmdzOiBOYXZpZ2F0ZWREYXRhKSB7XG4gIHBhZ2UgPSBhcmdzLm9iamVjdCBhcyBQYWdlXG5cbiAgbW9kZWwgPSBhcmdzLmNvbnRleHRcblxuICBwYWdlLmJpbmRpbmdDb250ZXh0ID0gYXJncy5jb250ZXh0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBvblNhdmUgKGFyZ3M6IEdlc3R1cmVFdmVudERhdGEpIHtcbiAgY29uc3QgbGFiZWwgPSB2aWV3LmdldFZpZXdCeUlkKHBhZ2UsICdsYWJlbCcpIGFzIFRleHRGaWVsZFxuICBjb25zdCBkZXNjcmlwdGlvbiA9IHZpZXcuZ2V0Vmlld0J5SWQocGFnZSwgJ2Rlc2NyaXB0aW9uJykgYXMgVGV4dFZpZXdcbiAgY29uc3QgZGF0ZURlYnV0ID0gdmlldy5nZXRWaWV3QnlJZChwYWdlLCAnZGF0ZURlYnV0JykgYXMgVGltZVBpY2tlclxuICBjb25zdCBkYXRlRmluID0gdmlldy5nZXRWaWV3QnlJZChwYWdlLCAnZGF0ZUZpbicpIGFzIFRpbWVQaWNrZXJcblxuICBjb25zdCBkYXRlU3RhcnQgPSBuZXcgRGF0ZSgpXG4gIGNvbnN0IGRhdGVFbmQgPSBuZXcgRGF0ZSgpXG5cbiAgZGF0ZVN0YXJ0LnNldEhvdXJzKGRhdGVEZWJ1dC5ob3VyKVxuICBkYXRlU3RhcnQuc2V0TWludXRlcyhkYXRlRGVidXQubWludXRlKVxuXG4gIGRhdGVFbmQuc2V0SG91cnMoZGF0ZUZpbi5ob3VyKVxuICBkYXRlRW5kLnNldE1pbnV0ZXMoZGF0ZUZpbi5taW51dGUpXG5cbiAgbW9kZWwuc2F2ZVJlc2VydmF0aW9uKHtcbiAgICBkYXRlRW5kOiBkYXRlU3RhcnQsXG4gICAgZGF0ZVN0YXJ0OiBkYXRlRW5kLFxuICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbi50ZXh0LFxuICAgIGlkOiBudWxsLFxuICAgIGxhYmVsOiBsYWJlbC50ZXh0LFxuICAgIHJvb21JZDogbW9kZWwucm9vbUlkXG4gIH0pLnRoZW4oKCkgPT4gZ29CYWNrKCkpXG5cbn1cbiJdfQ==